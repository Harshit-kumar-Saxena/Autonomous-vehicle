hardware:
  mock_hardware: true        # If true, use mock hardware (no serial connection required)
  port: "/dev/ttyACM0"        # Serial port for AetherNav board
  baudrate: 500000            # Baud rate
  timeout: 1.0                # Command timeout (seconds)
  auto_reconnect: true        # Automatically reconnect on disconnect
  
# Camera settings
camera:
  use_video_file: true      # If true, use video_path instead of live camera
  video_path: "/home/knight/General_Workspace/Autonomous-vehicle/inference_video/raw_recording.webm"              # Path to video file (used when use_video_file is true)
  device_id: 2                # V4L2 camera device ID
  width: 640                  # Capture width
  height: 480                 # Capture height
  fps: 30                     # Target framerate
  backend: "v4l2"             # OpenCV backend: v4l2, gstreamer, auto

# Segmentation model settings
segmentation:
  inference_backend: "onnx"  # Options: onnx, tensorrt
  engine_path: "models/fastscnn_road.engine"  # TensorRT engine (relative to stack root)
  onnx_path: "models/fastscnn_road.onnx"      # ONNX model (relative to stack root)
  input_width: 512          # Model input width
  input_height: 256         # Model input height
  roi_start_ratio: 0.7      # ROI starts at 70% of image height (bottom 30%)
  confidence_threshold: 0.4 # Minimum probability for lane detection
  min_lane_pixels: 100      # Minimum pixels to consider lane valid
  
  # Mask filtering parameters
  morphology_kernel_size: 7   # Kernel size for morphological operations
  morphology_iterations: 2    # Number of close/open iterations
  
  # Centerline extraction parameters
  min_road_width: 50          # Minimum road width to consider valid
  max_jump_threshold: 80      # Maximum allowed jump between consecutive centers
  centerline_skip_rows: 5     # Process every Nth row
  use_ransac_fit: true        # Use RANSAC for robust curve fitting
  ransac_residual_threshold: 20  # Pixel threshold for RANSAC inliers
  
  # Temporal smoothing
  temporal_window: 8          # Number of frames to average centerline (was 5)
  temporal_alpha: 0.5         # Weight for current frame (0-1) (was 0.7)

# Lane following planner settings
planner:
  type: "lane_follower"     # Options: lane_follower, waypoint
  
  lane_follower:
    cruise_linear_vel: 0.3  # m/s - Default forward speed
    min_linear_vel: 0.1     # m/s - Minimum speed during turns
    deadband_min: 0.40      # Lane center deadband (fraction) - wider for less correction
    deadband_max: 0.60      # Lane center deadband (fraction)
    angular_gain: 1.2       # Proportional gain for steering (was 2.0)
    slow_down_on_curve: true  # Reduce speed when turning
    curve_slow_factor: 0.5  # Speed multiplier during turns
    
    # Recovery behavior when lane is lost
    recovery:
      enabled: true
      hold_last_command_frames: 10  # Continue last command for N frames
      stop_after_lost_frames: 30    # Stop after N consecutive lost frames

# Executor settings
executor:
  loop_rate_hz: 30          # Main control loop frequency
  enable_telemetry: true    # Log telemetry data
  telemetry_log_interval: 10  # Log every N frames
  dry_run: false            # If true, don't send commands to hardware
  show_visualization: true  # Show segmentation and centerline visualization window
  
# Logging settings
logging:
  level: "INFO"             # Options: DEBUG, INFO, WARNING, ERROR
  log_to_file: false        # Write logs to file
  log_file_path: "logs/aethernav.log"
